---
# ---------------------------------------------------------------------------
# sla / defaults / main.yml
# ---------------------------------------------------------------------------

# Global SLA master-switch
sla_enabled: true

# ---------- Uptime SLA -----------------------------------------------------
# Target uptime percentage per rolling window
sla_uptime_target_percent: 99.9
# Rolling-window size in hours
sla_uptime_window_hours: 720    # 30 days

# ---------- Response-Time SLA ----------------------------------------------
# Endpoint(s) to probe; each entry is a URL
sla_response_endpoints: []
# Maximum acceptable response time in milliseconds
sla_response_time_max_ms: 2000
# How often (seconds) the probe fires
sla_probe_interval_seconds: 60
# Consecutive failures before breach is declared
sla_consecutive_failures_threshold: 3

# ---------- Error-Rate SLA -------------------------------------------------
# Path to the application error-rate log (lines contain epoch + error_count)
sla_error_rate_log: /var/log/app/error_rates.log
# Allowed errors per minute
sla_error_rate_max_per_minute: 50

# ---------- Notifications --------------------------------------------------
sla_notify_slack_webhook: ""
sla_notify_email: ""
sla_notify_pagerduty_routing_key: ""

# ---------- State file (persisted breach history) --------------------------
sla_state_dir: /var/lib/ansible_sla
